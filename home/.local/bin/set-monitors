#!/usr/bin/env sh

hostname=$(hostname)
displays=$(xrandr | grep ' connected' | cut -d ' ' -f 1)

hasdisplay() {
  echo $displays | grep -q $1
}

if [ "$hostname" = 'dean' ]
then
  if hasdisplay 'LVDS-1'
  then
    if hasdisplay 'DP-2'
    then
      xrandr --output DP-2 --primary --auto --output LVDS-1 --auto --right-of DP-2
    else
      xrandr --output LVDS-1 --auto --output DP-2 --off
    fi
  fi
elif [ "$hostname" = 'orpheus' ]
then
  if hasdisplay 'eDP1'
  then
    if hasdisplay 'HDMI1'
    then
      if hasdisplay 'VGA1'
      then
        xrandr --output eDP1 --auto --output HDMI1 --primary --rotate left --auto --right-of eDP1 --output VGA1 --auto --right-of HDMI1
      else
        xrandr --output eDP1 --auto --output HDMI1 --primary --rotate left --auto --right-of eDP1 --output VGA1 --off
      fi
    elif hasdisplay VGA1
    then
      xrandr --output eDP1 --auto --output VGA1 --primary --auto --right-of eDP1 --output HDMI1 --off
    else
      xrandr --output eDP1 --primary --auto --output HDMI1 --off --output VGA1 --off
    fi
  fi
else
  xrandr --auto
fi
