#!/usr/bin/env sh

home=/home/julian

export DISPLAY=:0.0
export XAUTHORITY="$home/.Xauthority"

hostname=$(hostname)
displays=$(xrandr | grep 'connected' | cut -d ' ' -f 1)
connected_displays=$(xrandr | grep ' connected' | cut -d ' ' -f 1)

hasdisplay() {
  echo $connected_displays | grep -q $1
}

primary() {
  hasdisplay 'DP-1' && [ "$1" = 'DP-1' ] && echo -n ' --primary'
}

positioning() {
  [ "$1" = 'eDP-1' ] && hasdisplay 'DP-1' && echo -n ' --right-of DP-2'
}

rotation() {
  echo -n ''
}

modifiers() {
  echo -n "$(primary $1)$(positioning $1)$(rotation $1)"
}

args=''
for display in $displays
do
  args="$args --output $display --auto$(modifiers $display)"
done

xrandr $args
[ -x "$home/.fehbg" ] && "$home/.fehbg"
